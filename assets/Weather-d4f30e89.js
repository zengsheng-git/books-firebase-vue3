import{r,k as b,o as d,c as _,b as s,t as a,e as k,d as x,l as N,v as $,m as C,q as p}from"./index-6d6da8c9.js";import{L as I}from"./LogoutButton-63f2ed37.js";import{a as v}from"./axios-edfcd65b.js";import{_ as W}from"./_plugin-vue_export-helper-c27b6911.js";import"./auth-e6bbf0c1.js";const B={class:"weather-search-container"},M={class:"weather-header"},V={class:"userWrip"},D={class:"username-display"},E={class:"weather-content"},K={class:"search-section"},L={class:"input-group"},R=["disabled"],q={key:0,class:"error-message"},P={key:1,class:"weather-result"},S={class:"weather-card"},U={class:"weather-header-info"},z={class:"city-name"},A={class:"temperature"},T={class:"weather-details"},Y={class:"weather-main"},j={class:"weather-icon"},F=["src","alt"],G={class:"weather-description"},H={class:"weather-stats"},J={class:"stat-item"},O={class:"stat-value"},Q={class:"stat-item"},X={class:"stat-value"},Z={class:"stat-item"},ss={class:"stat-value"},es={class:"stat-item"},ts={class:"stat-value"},as={class:"stat-item"},os={class:"stat-value"},ns={__name:"Weather",setup(is){const i=r(""),t=r(null),l=r(!1),n=r(""),m=localStorage.getItem("userName"),u="4e8f8e3b62bddf5018c441ed2bb8181a",h=async()=>{var c,e;if(!i.value.trim()){n.value="请输入城市名称";return}l.value=!0,n.value="",t.value=null;try{const o=await v.get(`https://api.openweathermap.org/geo/1.0/direct?q=${encodeURIComponent(i.value)}&appid=${u}`);if(!o.data||o.data.length===0)throw new Error("未找到该城市，请检查城市名称是否正确");const w=o.data[0],{lat:g,lon:f}=w,y=await v.get(`https://api.openweathermap.org/data/2.5/weather?lat=${g}&lon=${f}&appid=${u}&units=metric&lang=zh_cn`);t.value=y.data}catch(o){n.value=((e=(c=o.response)==null?void 0:c.data)==null?void 0:e.message)||o.message||"获取天气信息失败"}finally{l.value=!1}};return b(()=>{}),(c,e)=>(d(),_("div",B,[s("div",M,[e[1]||(e[1]=s("h1",{class:"main-title"},"天气查询",-1)),s("div",V,[s("div",D,a(k(m)),1),x(I)])]),s("div",E,[s("div",K,[s("div",L,[N(s("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>i.value=o),type:"text",placeholder:"输入城市名称（如：北京、上海、London）",class:"search-input",onKeyup:C(h,["enter"])},null,544),[[$,i.value]]),s("button",{onClick:h,class:"search-btn",disabled:l.value},a(l.value?"搜索中...":"搜索"),9,R)])]),n.value?(d(),_("div",q,a(n.value),1)):p("",!0),t.value?(d(),_("div",P,[s("div",S,[s("div",U,[s("h2",z,a(t.value.name)+", "+a(t.value.sys.country),1),s("div",A,a(Math.round(t.value.main.temp))+"°C",1)]),s("div",T,[s("div",Y,[s("div",j,[s("img",{src:`https://openweathermap.org/img/wn/${t.value.weather[0].icon}@2x.png`,alt:t.value.weather[0].description},null,8,F)]),s("div",G,a(t.value.weather[0].description),1)]),s("div",H,[s("div",J,[e[2]||(e[2]=s("span",{class:"stat-label"},"体感温度:",-1)),s("span",O,a(Math.round(t.value.main.feels_like))+"°C",1)]),s("div",Q,[e[3]||(e[3]=s("span",{class:"stat-label"},"湿度:",-1)),s("span",X,a(t.value.main.humidity)+"%",1)]),s("div",Z,[e[4]||(e[4]=s("span",{class:"stat-label"},"气压:",-1)),s("span",ss,a(t.value.main.pressure)+" hPa",1)]),s("div",es,[e[5]||(e[5]=s("span",{class:"stat-label"},"风速:",-1)),s("span",ts,a(t.value.wind.speed)+" m/s",1)]),s("div",as,[e[6]||(e[6]=s("span",{class:"stat-label"},"能见度:",-1)),s("span",os,a(t.value.visibility/1e3)+" km",1)])])])])])):p("",!0)])]))}},us=W(ns,[["__scopeId","data-v-982b9e86"]]);export{us as default};
